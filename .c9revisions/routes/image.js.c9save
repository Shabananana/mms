{"ts":1362029305217,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var fs = require('fs');\n\n/*\n * GET image creation form.\n */\n \nexports.createImageForm = function(req, res){\n  res.render('createImage', { title: 'Upload a new image' });\n};\n\nexports.createImagePost = function(req, res) {\n    // get the temporary location of the file\n    var tmp_path = req.files.thumbnail.path;\n    // set where the file should actually exists - in this case it is in the \"images\" directory\n    var target_path = './public/uploads/' + req.files.thumbnail.name;\n    // move the file from the temporary location to the intended location\n    fs.rename(tmp_path, target_path, function(err) {\n        if (err) throw err;\n        // delete the temporary file, so that the explicitly set temporary upload dir does not get filled with unwanted files\n        fs.unlink(tmp_path, function() {\n            if (err) throw err;\n            res.send('File uploaded to: ' + target_path + ' - ' + req.files.thumbnail.size + ' bytes');\n        });\n    });\n};\n"]],"start1":0,"start2":0,"length1":0,"length2":959}]],"length":959}
